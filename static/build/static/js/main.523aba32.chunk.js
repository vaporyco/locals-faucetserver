(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},104:function(e,t,a){},106:function(e,t,a){},174:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(92),c=a.n(s),o=(a(100),a(17)),i=a(18),u=a(20),l=a(19),f=a(9),d=(a(102),a(104),a(106),a(40)),h=a.n(d),m=a(93),p=a.n(m),v=a(12),g=a.n(v);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var E=function(e){Object(u.a)(a,e);var t=y(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={faucetinfo:null},e}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this;h.a.get(g.a.get("apiurl")+"/faucetinfo").then(function(t){t.data.vaporscanlink=t.data.vaporscanroot+"/address/"+t.data.account,e.setState({faucetinfo:t.data}),localStorage.setItem("faucetinfo",t.data)}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){if(!navigator.onLine)try{var e=JSON.parse(localStorage.getItem("faucetinfo"));this.setState({faucetinfo:e})}catch(t){}}},{key:"render",value:function(){return this.state.faucetinfo?r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"content has-text-centered has-text-weight-light has-text-grey-light"},r.a.createElement("p",null,"This faucet drips ",this.state.faucetinfo.payoutamountinvapor," Vapor every ",this.state.faucetinfo.payoutfrequencyinsec," seconds. You can register your account in our queue. Max queue size is currently"," ",this.state.faucetinfo.queuesize,". Serving from account"," ",r.a.createElement("a",{target:"_new",href:this.state.faucetinfo.vaporscanlink},this.state.faucetinfo.account),"( balance"," ",r.a.createElement(p.a,{value:Math.floor(this.state.faucetinfo.balance),displayType:"text",thousandSeparator:!0,suffix:" VAP"}),")."),r.a.createElement("p",null,"Example command line: wget ",g.a.get("apiurl"),"/donate/<your vapory address> ",r.a.createElement("br",null),r.a.createElement("a",{target:"_new",href:"https://github.com/vaporyco/locals-faucetserver#api"},"API docs")))):null}}]),a}(n.Component),b=a(21),w=(a(174),a(31)),O=a.n(w),S=a(94),k=a.n(S);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var j=function(e){Object(u.a)(a,e);var t=N(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={targetAccount:"",requestrunning:!1},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.clearMessages=n.clearMessages.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState({targetAccount:e.target.value})}},{key:"clearMessages",value:function(e){this.setState({faucetresponse:null,fauceterror:null})}},{key:"handleSubmit",value:function(e){var t=this;if(this.clearMessages(),O.a.isAddress(this.state.targetAccount)){this.setState({requestrunning:!0});var a=g.a.get("apiurl")+"/donate/"+this.state.targetAccount;h.a.get(a).then(function(e){t.setState({requestrunning:!1}),200!==e.status||t.setState({faucetresponse:{address:e.data.address,amount:e.data.amount,txhash:e.data.txhash,vaporscanlink:g.a.get("vaporscanroot")+"/tx/"+e.data.txhash}})}).catch(function(e){if(t.setState({requestrunning:!1}),e&&e.response)if(403!==e.response.status);else{var a=new k.a.TimeSpan(e.response.data.duration,0,0);t.setState({fauceterror:{message:e.response.data.message,duration:e.response.data.duration,timespan:a}})}else t.setState({fauceterror:{message:"Error connecting to the API: "+e.message}})})}else this.setState({fauceterror:{message:"invalid address"}});e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("load",function(){var t=window.location.search.substring(1);O.a.isAddress(t)?e.setState({targetAccount:t}):"undefined"===typeof window.web3?(window.addEventListener("message",function(t){var a=t.data;a&&a.type&&"VAPORY_PROVIDER_SUCCESS"===a.type&&(e.vap=new O.a(window.vapory))}),window.postMessage({type:"VAPORY_PROVIDER_REQUEST"},"*")):(e.vap=new O.a(window.web3.currentProvider),e.vap.accounts().then(function(t){t&&t[0]&&e.setState({targetAccount:t[0]})}).catch(function(){}))})}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container bottompadding"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Enter your vapory account address"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-primary",type:"text",placeholder:"Enter your vapory account address",value:this.state.targetAccount,onChange:this.handleChange}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{disabled:this.state.requestrunning,className:"button is-link"},"Send me Vapor"))))),this.state.requestrunning,r.a.createElement("div",{className:"container"},this.state.faucetresponse?r.a.createElement("article",{className:"message is-success",onClick:this.clearMessages},r.a.createElement("div",{className:"message-body"},r.a.createElement("p",null,"VAP sent to ",this.state.faucetresponse.address,"."),r.a.createElement("p",null,"Transaction hash"," ",r.a.createElement("a",{target:"_new",href:this.state.faucetresponse.vaporscanlink},this.state.faucetresponse.txhash)))):r.a.createElement("p",null),this.state.fauceterror?r.a.createElement("article",{className:"message is-danger",onClick:this.clearMessages},r.a.createElement("div",{className:"message-body"},r.a.createElement("b",null,this.state.fauceterror.message),r.a.createElement("br",null),this.state.fauceterror.timespan?r.a.createElement("span",null,"You are greylisted for another"," ",this.state.fauceterror.timespan.hours," hours and"," ",this.state.fauceterror.timespan.minutes," minutes."):r.a.createElement("span",null))):r.a.createElement("p",null))))}}]),a}(n.Component),R={apiurl:"http://localhost:3008",vaporscanroot:"https://vaporscan.com"};function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}g.a.set(R);var A=function(e){Object(u.a)(a,e);var t=x(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{className:"hero is-primary"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Vapory Faucet")))),r.a.createElement("div",{className:"container"},r.a.createElement(j,null),r.a.createElement(E,null)))}}]),a}(n.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(A,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");C?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):M(e)})}}()},95:function(e,t,a){e.exports=a(222)}},[[95,2,1]]]);
//# sourceMappingURL=main.523aba32.chunk.js.map